# 网络商城——学信汇软件概要设计 #





## 1引言
### 1.1编写目的

### 1.2背景

### 1.3定义

### 1.4参考资料




## 2总体设计
### 2.1需求规定

### 2.2运行环境

### 2.3基本设计概念和处理流程

### 2.4结构

### 2.5功能器求与程序的关系

### 2.6人工处理过程

### 2.7尚未问决的问题




## 3接口设计
### 3.1用户接口
1. 收货地址业务层的接口，用于对地址的增删改查<br>
   public interface IAddressService  
2. 购物车业务层的接口，用于购物车的获取以及对购物车中商品的添加和更新，<br>
   public interface ICartService  
3. 地区业务层的接口， 根据code查询区域名称<br>
   public interface IDistrictService  
4. 订单业务层的接口，用于创建订单和查询列表<br>
   public interface IOrderService  
5. 商品业务层的接口，对商品的增删改查和对热搜商品的排序<br>
   public interface IProductService
6. 用户业务层的接口,用于用户注册，登录，修改密码，修改头像，以及对用户进行查找和更新<br>
   public interface IUserService  
### 3.2外部接口
#### 3.2.1硬件接口
1. 光纤
2. usb
3. 电源
#### 3.2.2软件接口
1. 获取当前商家待发货所有商品信息
2. 返回当前商家所有的待发货的商品信息
3. 支付接口，通过调用支付宝接口支付
### 3.3内部接口

1. 收货地址持久层的接口
    
    public interface AddressMapper;
   

   插入用户的收货地址数据
   
     Integer insert(Address address);

   
   根据用户id统计收货地址数量

     Integer countByUid(Integer uid);

   
   根据用户id查询用户收获地址数据
   
    List<Address> findByUid(Integer uid);

   
   根据aid查询收货地址数据
   
     Address findByAid(Integer aid);

   
   根据用户的uid值来修改用户的收货地址设置为非默认
   
     Integer updateNonDefault(Integer uid);

   
   根据收货地址id删除收货地址数据
   
     Integer deleteByAid(Integer aid);

   
   根据用户uid查询当前用户最后一次被修改的收货地址数据
   
     Address findLastModified(Integer uid);


   更新用户地址信息
   
     Integer updateInfoByAid(Address address);
     
2. 购物车持久层的接口
   
    public interface CartMapper

   
   插入购物车数据
   
     Integer insert(Cart cart);
   
   更新购物车某件商品数量
   
     Integer updateNumByCid(Integer cid, Integer num, String modifiedUser, Date modifiedTime);

   
   根据用户id与商品id来查询购物车中数据
   
     Cart findByUidAndPid(Integer uid,Integer pid);

   
   根据用户uid查询VO类用户加入购物车的商品列表
   
     List<CartVO> findVOByUid(Integer uid);

   
   根据购物车cid值查询商品
   
     Cart findByCid(Integer cid);

   
   根据若干个购物车数据id查询详情的列表
   
     List<CartVO> findVOByCids(Integer[] cids);
3. 地区持久层的接口
   
    public interface DistrictMapper

   
   根据父代号查询区域信息
   
     List<District> findByParent(String  parent);

   
   根据code查询区域名称
   
     String findNameByCode(String code);
4. 订单持久层的接口
   
    public interface OrderMapper

   
   插入订单数据
   
     Integer insertOrder(Order order);

   
   插入订单项的数据
   
     Integer insertOrderItem(OrderItem orderItem);

   
   根据订单id查询详情的列表
   
     List<OrderVO> findVOByOid(Integer oid);
5. 商品持久层的接口
   
    public interface ProductMapper

   
   查询热销商品的前四名
   
     List<Product> findHotList();

   
   查询评分最高商品前四名
   
     List<Product> findMarkList();

   
   查询最贵的前四件商品
   
     List<Product> findDescList();

   
   查询最便宜的前四件商品
   
     List<Product> findAscList();

   根据商品id查询商品详情
   
    Product findById(Integer id);

   
   根据商品名查询商品详情
   
     List<Product> findByTitle(String title);

   
   查询所有在售商品
   
     List<Product> findAllProducts();

   
   发布商品
   
     Integer insert(Product product);
6. 用户持久层的接口
   
    public interface UserMapper

   
   插入用户的数据
   
     Integer insert(User user);

   
   根据用户名查询用户数据
   
     User findByUsername(String username);

   
   根据用户uid来修改用户密码
   
     Integer updatePasswordByYid(Integer uid, String password,
     String modifiedUser, Date modifiedTime);

   
   根据用户id查询用户的数据
   
     User findByUid(Integer uid);

   
   更新用户的数据信息
   
     Integer updateInfoByUid(User user);

   
   根据用户uid值修改用户头像

     Integer updateAvatarByUid(@Param("uid") Integer uid,
     @Param("avatar") String avatar,
     @Param("modifiedUser") String modifiedUser,
     @Param("modifiedTime")  Date modifiedTime);

## 4运行设计
### 4.1运行模块组合
1. 用户：登录模块+注册模块+商家注册模块+购物车模块
2. 主页：商品模块
3. 商家：管理商品模块+订单模块+退款模块
4. 管理员：登录模块+审核模块+商家管理模块
### 4.2运行控制
1. 在客户端登录后数据库验证账号密码，通过后进入主界面；
2. 新用户注册，提交用户名、密码、短信验证码；
3. 管理员通过注册请求，更新数据库；
4. 主界面显示当前所有在售的商品；
5. 用户购买商品，填写收货信息并付款；
6. 商家发货，买家确认收货，购买流程结束；
7. 商家申请上架商品，提交商品图片和信息审核；
8. 管理员审核商品上架，上架商品流程结束。
### 4.3运行时间
1. 本系统的各个模块之间功能是相互联系的，故各模块占用各种资源的时间是累计的，所以运行时间由顾客
的操作和网络的运行速度决定。
2. 时间规定：用户点击按钮，服务器综合响应时间不超过2s、数据库查询不超过1s、数据处理不得超过1s。


## 5系统数据结构设计
### 5.1逻辑结构设计要点
本系统使用MySql完成数据的存储与数据交互，创建数据库名为store2019011292
分别创建数据库表t_address

t_cart
t_comment
t_dict_district 





给出本系统内所使用的每个数据结构的名称、标识符以及它们之中每个数据项、记录、文卷和系的标识、定义、长度及它们之间的层次的或表格的相互关系。
### 5.2物理结构设计要点


给出本系统内所使用的每个数据结构中的每个数据项的存储要求，访问方法、存取单位、存取的物理关系（索引、设备、存储区域）、设计考虑和保密条件。
### 5.3数据结构与程序的关系
说明各个数据结构与访问这些数据结构的形式:



## 6系统出错处理设计
### 6.1出错信息
用一览表的方式说朗每种可能的出错或故障情况出现时，系统输出信息的形式、含意及处理方法。
### 6.2补救措施
说明故障出现后可能采取的变通措施，包括：
a.	后备技术说明准备采用的后备技术，当原始系统数据万一丢失时启用的副本的建立和启动的技术，例如周期性地把磁盘信息记录到磁带上去就是对于磁盘媒体的一种后备技术；
b.	降效技术说明准备采用的后备技术，使用另一个效率稍低的系统或方法来求得所需结果的某些部分，例如一个自动系统的降效技术可以是手工操作和数据的人工记录；
c.	恢复及再启动技术说明将使用的恢复再启动技术，使软件从故障点恢复执行或使软件从头开始重新运行的方法。
### 6.3系统维护设计
说明为了系统维护的方便而在程序内部设计中作出的安排，包括在程序中专门安排用于系统的检查与维护的检测点和专用模块。 各个程序之间的对应关系，可采用如下的矩阵图的形式；


